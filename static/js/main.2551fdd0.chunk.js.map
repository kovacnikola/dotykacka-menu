{"version":3,"sources":["App.js","index.js"],"names":["useStyles","makeStyles","theme","paper","width","height","overflow","button","margin","spacing","main","padding","container","outer","display","position","top","left","middle","verticalAlign","inner","marginLeft","marginRight","marginBottom","App","classes","React","useState","checked","setChecked","setLeft","right","setRight","intersection","a","b","filter","value","indexOf","leftChecked","rightChecked","handleToggle","currentIndex","newChecked","push","splice","not","customList","items","Paper","className","List","dense","component","role","map","labelId","ListItem","onClick","ListItemIcon","Checkbox","tabIndex","disableRipple","inputProps","ListItemText","id","primary","category","name","file","setFile","cloudId","setCloudId","accessToken","setAccessToken","data","categories","ThemeProvider","createMuiTheme","palette","green","contrastText","class","elevation","Typography","variant","TextField","label","size","style","onChange","e","target","IconButton","axios","get","headers","Authorization","then","Grid","alignItems","justifyContent","item","direction","Button","concat","disabled","length","accept","files","type","hidden","htmlFor","color","products","product","find","_categoryId","price","priceWithVat","sort","parseFloat","reader","FileReader","readAsBinaryString","onload","zip","PizZip","result","doc","Docxtemplater","loadZip","setData","render","error","console","log","JSON","stringify","key","Error","Object","getOwnPropertyNames","reduce","properties","errors","Array","errorMessages","explanation","join","out","getZip","generate","mimeType","saveAs","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.2551fdd0.chunk.js","sourcesContent":["import React, { useState } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport axios from 'axios';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport SyncIcon from '@material-ui/icons/Sync';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Docxtemplater from 'docxtemplater';\r\nimport PizZip from 'pizzip';\r\nimport { saveAs } from 'file-saver';\r\nimport { ThemeProvider } from '@material-ui/styles';\r\nimport { createMuiTheme } from '@material-ui/core/styles';\r\nimport green from '@material-ui/core/colors/green';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    width: 200,\r\n    height: 230,\r\n    overflow: 'auto',\r\n  },\r\n  button: {\r\n    margin: theme.spacing(0.5, 0),\r\n  },\r\n  main: {\r\n    padding: '1em',\r\n  },\r\n  container: {\r\n    margin: '1em',\r\n  },\r\n  outer: {\r\n    display: 'table',\r\n    position: 'absolute',\r\n    top: 0,\r\n    left: 0,\r\n    height: '100%',\r\n    width: '100%',\r\n  },\r\n  middle: {\r\n    display: 'table-cell',\r\n    verticalAlign: 'middle',\r\n  },\r\n  inner: {\r\n    marginLeft: 'auto',\r\n    marginRight: 'auto',\r\n    width: 600,\r\n    marginBottom: '6em',\r\n  },\r\n}));\r\n\r\nconst App = () => {\r\n  const classes = useStyles();\r\n  const [checked, setChecked] = React.useState([]);\r\n  const [left, setLeft] = React.useState([]);\r\n  const [right, setRight] = React.useState([]);\r\n\r\n  const intersection = (a, b) => {\r\n    return a.filter((value) => b.indexOf(value) !== -1);\r\n  };\r\n\r\n  const leftChecked = intersection(checked, left);\r\n  const rightChecked = intersection(checked, right);\r\n\r\n  const handleToggle = (value) => () => {\r\n    const currentIndex = checked.indexOf(value);\r\n    const newChecked = [...checked];\r\n\r\n    if (currentIndex === -1) {\r\n      newChecked.push(value);\r\n    } else {\r\n      newChecked.splice(currentIndex, 1);\r\n    }\r\n\r\n    setChecked(newChecked);\r\n  };\r\n\r\n  const not = (a, b) => {\r\n    return a.filter((value) => b.indexOf(value) === -1);\r\n  };\r\n\r\n  const handleCheckedRight = () => {\r\n    setRight(right.concat(leftChecked));\r\n    setLeft(not(left, leftChecked));\r\n    setChecked(not(checked, leftChecked));\r\n  };\r\n\r\n  const handleCheckedLeft = () => {\r\n    setLeft(left.concat(rightChecked));\r\n    setRight(not(right, rightChecked));\r\n    setChecked(not(checked, rightChecked));\r\n  };\r\n\r\n  const customList = (items) => (\r\n    <Paper className={classes.paper}>\r\n      <List dense component='div' role='list'>\r\n        {items.map((value) => {\r\n          const labelId = `transfer-list-item-${value}-label`;\r\n\r\n          return (\r\n            <ListItem\r\n              key={value.id}\r\n              role='listitem'\r\n              button\r\n              onClick={handleToggle(value)}\r\n            >\r\n              <ListItemIcon>\r\n                <Checkbox\r\n                  checked={checked.indexOf(value) !== -1}\r\n                  tabIndex={-1}\r\n                  disableRipple\r\n                  inputProps={{ 'aria-labelledby': labelId }}\r\n                />\r\n              </ListItemIcon>\r\n              <ListItemText id={labelId} primary={value.category} />\r\n            </ListItem>\r\n          );\r\n        })}\r\n        <ListItem />\r\n      </List>\r\n    </Paper>\r\n  );\r\n\r\n  const [file, setFile] = useState({ name: 'Nahrát šablonu' });\r\n  const [cloudId, setCloudId] = useState();\r\n  const [accessToken, setAccessToken] = useState();\r\n  const data = { categories: [] };\r\n  const generate = () => {\r\n    data.categories = right;\r\n    axios\r\n      .get(`https://api.dotykacka.cz/v2/clouds/${cloudId}/products?limit=100`, {\r\n        headers: {\r\n          Authorization: `Bearer ${accessToken}`,\r\n        },\r\n      })\r\n      .then((products) => {\r\n        for (let product of products.data.data) {\r\n          let category = data.categories.find(\r\n            (category) => category.id == product._categoryId\r\n          );\r\n          if (category) {\r\n            category.items.push({\r\n              item: product.name,\r\n              price: product.priceWithVat,\r\n            });\r\n          }\r\n        }\r\n        for (let category of data.categories) {\r\n          category.items.sort(\r\n            (a, b) => parseFloat(b.price) - parseFloat(a.price)\r\n          );\r\n        }\r\n        let reader = new FileReader();\r\n        let binary = reader.readAsBinaryString(file);\r\n        reader.onload = () => {\r\n          let zip = new PizZip(reader.result);\r\n          let doc = new Docxtemplater().loadZip(zip);\r\n          try {\r\n            doc.setData(data);\r\n            doc.render();\r\n          } catch (error) {\r\n            function replaceErrors(key, value) {\r\n              if (value instanceof Error) {\r\n                return Object.getOwnPropertyNames(value).reduce(function (\r\n                  error,\r\n                  key\r\n                ) {\r\n                  error[key] = value[key];\r\n                  return error;\r\n                },\r\n                {});\r\n              }\r\n              return value;\r\n            }\r\n            console.log(JSON.stringify({ error: error }, replaceErrors));\r\n\r\n            if (error.properties && error.properties.errors instanceof Array) {\r\n              const errorMessages = error.properties.errors\r\n                .map(function (error) {\r\n                  return error.properties.explanation;\r\n                })\r\n                .join('\\n');\r\n              console.log('errorMessages', errorMessages);\r\n            }\r\n            throw error;\r\n          }\r\n          let out = doc.getZip().generate({\r\n            type: 'blob',\r\n            mimeType:\r\n              'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\r\n          });\r\n          saveAs(out, 'menu.docx');\r\n        };\r\n      });\r\n  };\r\n\r\n  const sync = () => {\r\n    if (accessToken) {\r\n      axios\r\n        .get(\r\n          `https://api.dotykacka.cz/v2/clouds/${cloudId}/categories?limit=100`,\r\n          {\r\n            headers: {\r\n              Authorization: `Bearer ${accessToken}`,\r\n            },\r\n          }\r\n        )\r\n        .then((categories) => {\r\n          setLeft(\r\n            categories.data.data.map((category) => {\r\n              return {\r\n                id: category.id,\r\n                category: category.name,\r\n                items: [],\r\n              };\r\n            })\r\n          );\r\n          setRight([]);\r\n        });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <ThemeProvider\r\n      theme={createMuiTheme({\r\n        palette: {\r\n          primary: {\r\n            main: green[600],\r\n            contrastText: '#FFF',\r\n          },\r\n        },\r\n      })}\r\n    >\r\n      <div class='outer' className={classes.outer}>\r\n        <div class='middle' className={classes.middle}>\r\n          <div class='inner' className={classes.inner}>\r\n            <Paper elevation={3} className={classes.main}>\r\n              <div className={classes.container}>\r\n                <Typography variant='h4'>dotykacka-menu</Typography>\r\n              </div>\r\n              <div className={classes.container}>\r\n                <TextField\r\n                  label='Cloud ID'\r\n                  variant='outlined'\r\n                  size='small'\r\n                  style={{ marginRight: '1em' }}\r\n                  onChange={(e) => setCloudId(e.target.value)}\r\n                />\r\n                <TextField\r\n                  label='Přístupový token'\r\n                  variant='outlined'\r\n                  size='small'\r\n                  onChange={(e) => setAccessToken(e.target.value)}\r\n                />\r\n                <IconButton onClick={sync}>\r\n                  <SyncIcon />\r\n                </IconButton>\r\n              </div>\r\n              <div className={classes.container}>\r\n                <Grid\r\n                  container\r\n                  spacing={2}\r\n                  alignItems='center'\r\n                  justifyContent='center'\r\n                >\r\n                  <Grid item>{customList(left)}</Grid>\r\n                  <Grid item>\r\n                    <Grid container direction='column' alignItems='center'>\r\n                      <Button\r\n                        variant='outlined'\r\n                        size='small'\r\n                        className={classes.button}\r\n                        onClick={handleCheckedRight}\r\n                        disabled={leftChecked.length === 0}\r\n                      >\r\n                        &gt;\r\n                      </Button>\r\n                      <Button\r\n                        variant='outlined'\r\n                        size='small'\r\n                        className={classes.button}\r\n                        onClick={handleCheckedLeft}\r\n                        disabled={rightChecked.length === 0}\r\n                      >\r\n                        &lt;\r\n                      </Button>\r\n                    </Grid>\r\n                  </Grid>\r\n                  <Grid item>{customList(right)}</Grid>\r\n                </Grid>\r\n              </div>\r\n              <div className={classes.container}>\r\n                <input\r\n                  accept='.docx'\r\n                  id='contained-button-file'\r\n                  onChange={(e) => {\r\n                    setFile(e.target.files[0]);\r\n                  }}\r\n                  type='file'\r\n                  hidden\r\n                />\r\n                <label htmlFor='contained-button-file'>\r\n                  <Button\r\n                    variant='outlined'\r\n                    color='primary'\r\n                    component='span'\r\n                    style={{ marginRight: '1em' }}\r\n                  >\r\n                    {file.name}\r\n                  </Button>\r\n                </label>\r\n                <Button color='primary' variant='contained' onClick={generate}>\r\n                  Vygenerovat\r\n                </Button>\r\n              </div>\r\n            </Paper>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </ThemeProvider>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n"],"sourceRoot":""}